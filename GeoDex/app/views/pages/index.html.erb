<div id="map"></div>
  <div id="geodex">
    <header id="geodexHeader">
      <h1>Cycling Routes</h1>
      
      <div id="addData">
        <button  value="addData">
          <a href="#"><i class="icon-fixed-width icon-plus"></i></a> 
        </button>
      </div>
      Search: <input ng-model="query">
    </header>
    <div id="contentContainer" ng-controller="AccordionDemoCtrl">
  	<ul class="auth-list">
  	    <li><%= link_to "Facebook", user_omniauth_authorize_path(:facebook), :class => 'button auth-facebook' %></li>
  	    <li><%= link_to "Google", user_omniauth_authorize_path(:google_oauth2), :class => 'button auth-google' %></li>
  	    <li><%= link_to "Github", user_omniauth_authorize_path(:github), :class => 'button auth-github' %></li>
    </ul>
      <accordion close-others="oneAtATime">
        <accordion-group heading="{{group.title}}" ng-repeat="group in groups | filter:query" ng-click="onContentHeaderClick()">
        {{group.content}}
      </accordion-group>
    </accordion>
  </div>
  <footer id="actionBar">
    <div id="social-nav" class="">
      <ul>
        <li><a href="#"><i class="icon-fixed-width icon-facebook"></i></a></li>
        <li><a href="#"><i class="icon-fixed-width icon-twitter"></i></a></li>
        <li><a href="#"><i class="icon-fixed-width icon-google-plus"></i></a></li>
      </ul>
    </div>
   <!-- <button class="btn" ng-click="goToFB()">Facebook</button>
   <button class="btn" ng-click="goToTwit()">Twitter</button>
   <button class="btn" ng-click="goToGooglePlus()">G +</button> -->
 </footer>
</div>
<script>
'use strict';

// JS for leaflet 
$(function(){
	// Declare app level module which depends on filters, and services
	angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives', 'myApp.controllers', 'ui.bootstrap']);

	// JS for Angular
	function AccordionDemoCtrl($scope) {
		$scope.oneAtATime = true;

		$scope.groups = [
		{
			title: "That one In the North",
			content: "Lorem ipsum poopem sapsam"

		}];

		$scope.addItem = function() {
			var newItemNo = $scope.items.length + 1;
			$scope.items.push('Item ' + newItemNo);
		};
	}

	var	featureCollection = {
	    "type": "FeatureCollection",
	    "features": [
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Siu Lek Yuen Road Playground",
	                "中文名稱": "小瀝源路遊樂場",
	                "ENGLISH ADDRESS": "Siu Lek Yuen Road, Sha Tin",
	                "中文地址": "沙田小瀝源路"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.206377,
	                    22.386308,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Yee Shing Lane Temporary Sitting Out Area",
	                "中文名稱": "怡盛里臨時休憩處",
	                "ENGLISH ADDRESS": "Yee Shing Lane, Chai Wan",
	                "中文地址": "柴灣怡盛里"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.238006,
	                    22.26415,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Kowloon Bay Park",
	                "中文名稱": "九龍灣公園",
	                "ENGLISH ADDRESS": "Kai Lai Road, Kowloon Bay",
	                "中文地址": "九龍灣啟禮道"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.207219,
	                    22.327489,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Carpenter Road Park",
	                "中文名稱": "賈炳達道公園",
	                "ENGLISH ADDRESS": "Junction Road, Kowloon",
	                "中文地址": "九龍聯合道"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.189244,
	                    22.330709,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Kung Lok Road Playground",
	                "中文名稱": "功樂道遊樂場",
	                "ENGLISH ADDRESS": "Kung Lok Road, Kwun Tong, Kowloon",
	                "中文地址": "九龍觀塘功樂道"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.22011,
	                    22.316956,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Siu Sai Wan Road Garden",
	                "中文名稱": "小西灣道花園",
	                "ENGLISH ADDRESS": "Siu Sai Wan Road, Chai Wan",
	                "中文地址": "柴灣小西灣道"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.247567,
	                    22.265626,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Sha Tin Road Safety Park",
	                "中文名稱": "沙田交通安全公園",
	                "ENGLISH ADDRESS": "1 Kong Pui Street, Sha Tin",
	                "中文地址": "沙田崗背街1號"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.196233,
	                    22.380672,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Tuen Mun Park",
	                "中文名稱": "屯門公園",
	                "ENGLISH ADDRESS": "Tuen Mun Heung Sze Wui Road, Tuen Mun",
	                "中文地址": "屯門屯門鄉事會路"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    113.973588,
	                    22.392147,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Wu Shan Recreation Playground",
	                "中文名稱": "湖山遊樂場",
	                "ENGLISH ADDRESS": "Tuen Mun Wu Shan Road",
	                "中文地址": "屯門湖山路"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    113.965099,
	                    22.379268,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "West Kowloon Waterfront Promenade",
	                "中文名稱": "西九龍海濱長廊",
	                "ENGLISH ADDRESS": "West Kowloon Reclamation Area (J/O Austin Road West/ Nga Cheung Road)",
	                "中文地址": "西九龍填海區 (九龍柯士甸道西/雅翔道交界)"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.155178,
	                    22.301315,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Tsuen Wan Park",
	                "中文名稱": "荃灣公園",
	                "ENGLISH ADDRESS": "59 Wing Shun Street, Tsuen Wan",
	                "中文地址": "荃灣永順街59號"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.113647,
	                    22.367728,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Morrison Hill Road Playground",
	                "中文名稱": "摩理臣山道遊樂場",
	                "ENGLISH ADDRESS": "Sung Tak Street/ Morrison Hill Road, Wan Chai",
	                "中文地址": "灣仔崇德街/摩理臣山道"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.179484,
	                    22.275388,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Tsing Yi Northeast Park",
	                "中文名稱": "青衣東北公園",
	                "ENGLISH ADDRESS": "10, Tam Kon Shan Road, Tsing Yi",
	                "中文地址": "青衣担杆山路10號"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.098768,
	                    22.362538,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Quarry Bay Park",
	                "中文名稱": "鰂魚涌公園",
	                "ENGLISH ADDRESS": "Near Hoi Tai Street, Quarry Bay",
	                "中文地址": "鰂魚涌近海堤街"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.215451,
	                    22.288426,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Pak Wo Road Playground",
	                "中文名稱": "百和路遊樂場",
	                "ENGLISH ADDRESS": "Pak Wo Road, Fanling, N.T.",
	                "中文地址": "新界粉嶺百和路"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.133086,
	                    22.491969,
	                    0
	                ]
	            }
	        },
	        {
	            "type": "Feature",
	            "properties": {
	                "ENGLISH CATEGORY": "Cycling Sites",
	                "中文類別": "單車場",
	                "ENGLISH NAME": "Tsing Hung Road Playground",
	                "中文名稱": "青鴻路遊樂場",
	                "ENGLISH ADDRESS": "Tsing Hung Road, Tsing Yi, N.T.",
	                "中文地址": "新界青衣青鴻路"
	            },
	            "geometry": {
	                "type": "Point",
	                "coordinates": [
	                    114.10947,
	                    22.34296,
	                    0
	                ]
	            }
	        }
	    ]
	}

	var map = L.map('map').setView([22.25018, 114.18571], 13);

	var cloudmade = L.tileLayer('http://{s}.tile.cloudmade.com/{key}/{styleID}/256/{z}/{x}/{y}.png', {
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
		minZoom: 11,
		key: 'BC9A493B41014CAABB98F0471D759707',
		styleID: 96219, 
		reuseTiles: true
		}).addTo(map);	

	function onContentHeaderClick() {
	};

	function onEachFeature(feature, layer) {
	    // does this feature have a property named popupContent?
	    if (feature.properties && feature.properties.popupContent) {
	        layer.bindPopup(feature.properties.popupContent);
	    }
	}

	function geodexInit(feat) {
		L.geoJson(feat, {
		    onEachFeature: onEachFeature
		}).addTo(map);
	}

});

</script>